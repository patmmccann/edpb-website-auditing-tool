@if(this.card.localStorageLines.length>0){
  <table matSort (matSortChange)="sortData($event)" style="width: 100%">
    <colgroup>
      <col span="1" style="width: 30%;">
      <col span="1" style="width: 30%;">
      <col span="1" style="width: 20%;text-align:center;">
      @if(context=='evaluate'){
        <col span="1" style="width: 20%;">
      }
    </colgroup>
    <thead>
      <tr>
        <th mat-sort-header="host">Host</th>
        <th mat-sort-header="key">Key</th>
        <th mat-sort-header="category">Category</th>
        @if(context=='evaluate'){
          <th mat-sort-header="evaluation">Evaluation</th>
        }
      </tr>
    </thead>
    <tbody #tableContent>
      @for (line of (this.card.localStorageLines | filterForLocalStorage:searchLocalStorage | filterForStatus:searchStatus); track line.idx) {

        <tr>
          <td class="truncate" (click)="selected(line)">{{line.host}}</td>
          <td class="truncate" (click)="selected(line)">{{line.key}}</td>
          <td class="truncate" (click)="selected(line)"
          [innerHTML]="line | findPurpose | async | safeHtml"
          >
          </td>
          @if(context=='evaluate'){
            <td>
              <button
              mat-icon-button
              class="evaluation-icon"
              (click)="setEvaluation(line, 'compliant')"
              >
               <mat-icon 
               [class.eval_not_selected]="line.status!='compliant'"
               style="color: green;">done</mat-icon>
              </button> 
              <button
              mat-icon-button
              class="evaluation-icon"
              (click)="setEvaluation(line, 'not_compliant')"
              >
               <mat-icon 
               [class.eval_not_selected]="line.status!='not_compliant'"
               style="color: red;">close</mat-icon>
              </button>
               <button
               mat-icon-button
              class="evaluation-icon"
               (click)="setEvaluation(line, 'TBD')"
               >
                 <mat-icon 
                 [class.eval_not_selected]="line.status!='TBD'"
                 style="color: #004494;">search</mat-icon>
               </button>
             </td>
          }
          
        </tr>
    }
    </tbody>
  
  </table>
}
